{% extends 'user/base.html' %}

{% block content %}
<h2>Resubmit Request with Additional Files</h2>

<div class="original-details">
    <h4>Original Request</h4>
    <p><strong>File No:</strong> {{ original_request.file_no }}</p>
    <p><strong>Request Text:</strong> {{ original_request.request_text }}</p>
    
    <div class="existing-files">
        <h5>Existing Files:</h5>
        <ul>
            {% for file in existing_files %}
                <li>{{ file.file.name }}</li>
            {% endfor %}
            {% for file in existing_enclosures %}
                <li>{{ file.file.name }}</li>
            {% endfor %}
        </ul>
    </div>
</div>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    
    <div class="new-files">
        <h4>Add New Files</h4>
        
        <div class="form-group">
            <label>Additional Form Files:</label>
            <input type="file" name="new_files" multiple>
        </div>
        
        <div class="form-group">
            <label>Additional Enclosures:</label>
            <input type="file" name="new_enclosures" multiple>
        </div>
    </div>
    
    <div class="form-actions">
        <button type="submit" class="btn btn-primary">
            Resubmit with Added Files
        </button>
        <a href="{% url 'requests:user_history' %}" class="btn btn-secondary">
            Cancel
        </a>
    </div>
</form>
{% endblock %}